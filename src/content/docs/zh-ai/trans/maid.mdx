---
title: 女仆模组
---

import { Aside } from "@astrojs/starlight/components"
import FileCard from "@/components/FileCard"

在 Touhou Little Maid 1.1.3 版本更新中，该模组增添了对 Yes Steve Model 模组模型的兼容性，使得其能够使用 Yes Steve Model 未加密的模型与动画文件。不过，加密的 ysm 格式模型无法在此使用！

<Aside>
  自 Touhou Little Maid 1.1.13 版本起，我们采用了与 Yes Steve Model 2.2.2
  版本相同的 molang 系统。
</Aside>

<Aside>
加密格式的 Java 版 Yes Steve Model 模型（即后缀为 `.ysm` 的单个文件）**无法被读取和转换**！

若你制作的模型未获得原作者的许可，**请勿进行转换和发布**！我们坚决反对任何侵权盗取模型的行为，由此引发的后果与我们无关！

</Aside>

Touhou Little Maid 支持借助插件来制作模型包，相关插件文件及教程如下：

<FileCard name="tlm - utils.js" size="514 KB" url="/files/tlm - utils.js" />

插件使用教程：[https://www.bilibili.com/video/BV1LN411G7sU](https://www.bilibili.com/video/BV1LN411G7sU)

这两个模组所使用的模型和动画基本兼容，仅存在一些细微差异，在此特别说明。

## 模型

目前，女仆所使用的 YSM 模型支持主手和副手持有的拔刀剑渲染（后续也会同步支持 YSM 模组本体），同时支持背部物品和头戴物品的渲染。这些渲染均通过定位组来实现，若缺少相应的定位组，对应的额外内容将不会进行渲染。

| 组名                                                               | 说明                                                                                                    |
| :----------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `LeftHandLocator`                                                  | 与 YSM 一致，是左手手持物品的定位组                                                                     |
| `RightHandLocator`                                                 | 与 YSM 一致，是右手手持物品的定位组                                                                     |
| `LeftWaistLocator`                                                 | 右手（此处无误）持有拔刀剑时，拔刀剑的渲染定位组                                                        |
| `RightWaistLocator`                                                | 左手（此处无误）持有拔刀剑时，拔刀剑的渲染定位组                                                        |
| `BackpackLocator`                                                  | 女仆背负背包时的定位组，定位应置于两肩中间。<br/>当女仆装饰槽位放置拔刀剑或旗帜时，也会以此作为定位组。 |
| `Head`                                                             | 与 YSM 一致，是头部定位组                                                                               |
| `PistolLocator`                                                    | 与 YSM 一致，当女仆装饰槽位放置手枪时，会渲染一个插在腰部的手枪模型                                     |
| `RifleLocator`                                                     | 与 YSM 一致，当女仆装饰槽位放置步枪或火箭筒时，会渲染一个背在背上的步枪或火箭筒模型                     |
| 所有以 `ysmGlow` 开头的组<br/>比如 `ysmGlowHead`，`ysmGlowRingBow` | 与 YSM 一致的发光组，在大多数光影效果下会呈现发光效果。 **仅对当前组有效**                              |

## 动画

由于玩家的部分行为女仆无法完成，例如骑马、潜行、趴下、飞行以及鞘翅飞行等，但女仆具备游玩五子棋、使用电脑等功能，因此两者的部分动画名称存在差异，且女仆的动画数量相对较少。

女仆模组的条件动画（即通过动画名触发播放的动画）与 YSM 的基本一致，不过女仆无法执行 swing（挥动，即左键动作）副手武器的操作，目前也不能使用盾牌。

以下主动画可直接使用，播放条件与 YSM 相同：

| 名称             | 作用                               | 备注                                                             |
| :--------------- | :--------------------------------- | :--------------------------------------------------------------- |
| idle             | 女仆无任何操作时的动画             | 循环播放                                                         |
| walk             | 女仆正常行走时的动画               | 循环播放                                                         |
| run              | 女仆疾跑时的动画                   | 循环播放，但女仆通常较难达到跑步的速度                           |
| jump             | 女仆跳跃时的动画                   | 循环播放                                                         |
| attacked         | 女仆被攻击时的动画                 | 单次播放                                                         |
| swim_stand       | 女仆在水中站立式游泳的动画         | 循环播放                                                         |
| swim             | 女仆在水中游泳的动画               | 女仆模组 1.1.14 新增内容，循环播放                               |
| sit              | 女仆待命状态（Shift 右击）时的动画 | 循环播放<br/>此动画与 YSM 的坐下动画在位置上略有差异，需进行调整 |
| boat             | 女仆坐在船上时的动画               | 循环播放                                                         |
| sleep            | 女仆睡觉时的动画                   | 循环播放                                                         |
| death            | 女仆死亡时的动画                   | 单次播放，时长 1 秒                                              |
| swing_hand       | 女仆挥动手臂时播放的动画（左键）   | 单次播放                                                         |
| use_offhand      | 女仆使用左手时播放的动画（右键）   | 单次播放                                                         |
| use_mainhand     | 女仆使用右手时播放的动画（右键）   | 单次播放                                                         |
| ladder_up        | 女仆爬梯向上的动画                 | 女仆模组 1.1.14 新增内容，循环播放                               |
| ladder_stillness | 女仆爬梯静止不动的动画             | 女仆模组 1.1.14 新增内容，循环播放                               |
| ladder_down      | 女仆爬梯向下的动画                 | 女仆模组 1.1.14 新增内容，循环播放                               |

以下是女仆模组特有的动画，需要额外添加：

| 名称      | 作用                                       | 备注     |
| :-------- | :----------------------------------------- | :------- |
| gomoku    | 女仆坐在五子棋盘、象棋、国际象棋旁边的动画 | 循环播放 |
| bookshelf | 女仆坐在书架上的动画                       | 循环播放 |
| computer  | 女仆坐在电脑旁的动画                       | 循环播放 |
| keyboard  | 女仆坐在电子琴旁的动画                     | 循环播放 |
| chair     | 女仆坐在坐垫上的动画                       | 循环播放 |
| picnic    | 女仆坐在野餐垫上的动画                     | 循环播放 |
| beg       | 当玩家手持蛋糕靠近女仆时，女仆播放此动画   | 循环播放 |
| game_lost | 当女仆输掉棋局时播放此动画                 | 循环播放 |
| game_win  | 当女仆赢得棋局时播放此动画                 | 循环播放 |

所有条件动画均可应用于女仆，具体如下：

- `hold_mainhand`、`hold_offhand` 条件动画，在女仆持有特定物品时播放。例如钓鱼：`hold_mainhand:fishing`
- `passenger` 条件动画，在某些实体骑乘女仆时播放。
- `swing`、`swing_offhand` 条件动画。在女仆挥动物品时播放，但女仆无法执行 swing_offhand（挥动副手）操作。
- `use_mainhand`、`use_offhand` 条件动画，在女仆使用特定物品时播放。例如主手吃东西：`use_mainhand:eat`；女仆使用御币发射弹幕时：`use_mainhand:gohei`
- `vehicle` 条件动画，在女仆骑乘特定生物时播放。例如玩家使用鞍抱起女仆时的动画为：`vehicle$minecraft:player`
- `head`、`chest`、`legs`（注意为复数）、`feet` 条件动画，在女仆穿戴特定护甲时播放。
- `tac` 条件动画，与 tacz 的兼容动画，与 YSM 完全相同。
- 坐垫动画，这是女仆特有的条件动画，以 `chair` 开头，`$` 后接坐垫的模型 ID。
  - 例如游戏内的椅子：`chair$touhou_little_maid:class_chair`

## Molang 函数与变量

女仆模组具备 Yes Steve Model 模组所有的 molang 函数，但由于女仆缺少玩家的部分属性，部分函数变量的返回值有所不同。

### 新增 molang 变量

| 变量名             | 简介                                    |
| :----------------- | :-------------------------------------- |
| `tlm.is_begging`   | 女仆处于祈求状态时为 true，否则为 false |
| `tlm.is_sitting`   | 女仆处于待命状态时为 true，否则为 false |
| `tlm.has_backpack` | 女仆背有背包时为 true，否则为 false     |

### 不同 molang 函数变量

| 变量名                       | 简介                                     |
| :--------------------------- | :--------------------------------------- |
| `ysm.bone_pivot_abs`         | 女仆模组中该函数无返回值                 |
| `ysm.food_level`             | 女仆目前没有饱食度系统，该变量固定为 20  |
| `ysm.texture_name`           | 该变量为空字符串                         |
| `ysm.rendering_in_inventory` | 始终为 false                             |
| `query.player_level`         | 女仆拥有经验系统，该变量返回女仆的经验值 |
| `query.has_cape`             | 女仆没有披风机制，该变量固定返回 false   |

所有调试用的 molang 函数，如 `query.debug_output`、`ysm.dump_mods`、`ysm.dump_effects` 等均无法使用，这些函数为空函数。
